"use strict";class Tabled{constructor(e){if(this.stackedClass="tabled--stacked",e.index||(e.index=Math.floor(1e4*Math.random())),this.checkConditions(e.table)){e.table.classList.add("tabled"),this.wrap(e.table);var t=this.getWrapper(e.table);t.setAttribute("id","tabled-n"+e.index),this.adjustColumnsWidth(e.table),this.addTableControls(e.table),this.applyFade(e.table),t.addEventListener("scroll",()=>{this.applyFade(e.table)}),new ResizeObserver(()=>{this.applyFade(e.table)}).observe(t)}else if(e.table.classList.contains(this.stackedClass)){const a=Array.from(e.table.querySelectorAll("thead th"));Array.from(e.table.querySelectorAll("tbody tr")).forEach(e=>{Array.from(e.querySelectorAll("td, th")).forEach((e,t)=>{t=a[t];t&&e.setAttribute("data-label",t.innerText+": ")})})}else e.fail_class&&e.table.classList.add(e.fail_class)}getWrapper(e){return e.parentNode}getContainer(e){return e.parentNode?e.parentNode.parentNode:null}adjustColumnsWidth(e,t=50,a=8,l="tabled__column--large",r="tabled__column--small"){for(var s of e.rows)Array.from(s.cells).forEach(e=>{e.innerText.length>t?e.classList.add(l):e.innerText.length<=a&&e.classList.add(r)})}wrap(e){var t=document.createElement("div"),e=(t.classList.add("tabled--wrapper"),t.setAttribute("tabindex","0"),e.parentNode.insertBefore(t,e),t.appendChild(e),document.createElement("div"));e.classList.add("tabled--container"),t.parentNode.insertBefore(e,t),e.appendChild(t)}applyFade(e){var e=this.getWrapper(e),t=e.parentNode,a=(1<e.scrollLeft?(t.classList.add("tabled--fade-left"),t.querySelector(".tabled--previous").removeAttribute("disabled")):(t.classList.remove("tabled--fade-left"),t.querySelector(".tabled--previous").setAttribute("disabled","disabled")),e.offsetWidth);e.scrollWidth-e.scrollLeft-a<1?(t.classList.remove("tabled--fade-right"),t.querySelector(".tabled--next").setAttribute("disabled","disabled")):(t.classList.add("tabled--fade-right"),t.querySelector(".tabled--next").removeAttribute("disabled"))}move(e,t="previous"){var a,l=this.getWrapper(e),r=null!=(a=null==(a=l.parentNode)?void 0:a.getBoundingClientRect().left)?a:0,s=(1<e.rows[0].cells.length?e.rows[0]:e.rows[1]).cells;let d=0,i=0;if("next"==t)for(let e=0;e<s.length;e++){var o=s[e].getClientRects()[0].left;if(1<(d=o-r)){i=s[e].offsetLeft;break}}else if("previous"==t)for(let e=s.length-1;0<e;e--){var n=s[e].getClientRects()[0].left;if((d=n-r)<0){i=s[e].offsetLeft;break}}l.scrollTo({left:i,top:0,behavior:"smooth"})}addTableControls(l){["next","previous"].forEach(e=>{var t=document.createElement("button"),a=(t.classList.add("tabled--"+e),t.setAttribute("aria-label",e+" table column"),t.setAttribute("aria-controls",this.getWrapper(l).getAttribute("id")),t.setAttribute("disabled","disabled"),t.setAttribute("type","button"),t.addEventListener("click",()=>{this.move(l,e)}),this.getContainer(l));a&&a.prepend(t)});var e,t=l.querySelector("caption");t&&(t.classList.add("visually-hidden"),(e=document.createElement("div")).classList.add("table-caption"),e.innerHTML=t.innerText,e.setAttribute("aria-hidden","true"),t=this.getContainer(l))&&t.appendChild(e)}checkConditions(e){return console.log(e),!(e.classList.contains(this.stackedClass)||e.querySelector("table")||!e.querySelector("table > tbody")||document.evaluate("ancestor::table",e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)}}